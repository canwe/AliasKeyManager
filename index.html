<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Alias Key Manager by scholzj</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Alias Key Manager</h1>
      <h2 class="project-tagline">Alternative KeyManager which selects the client private key for client authentication based on specified key alias or selects the first key in the keystore. It doesn&#39;t select the client key based on the supported CAs.</h2>
      <a href="https://github.com/scholzj/AliasKeyManager" class="btn">View on GitHub</a>
      <a href="https://github.com/scholzj/AliasKeyManager/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/scholzj/AliasKeyManager/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>AliasKeyManager is an alternative KeyManager implementation which selects the key used for client authentication based on the alias and not based on the match against the Certification Authorities which are supported by the SSL server. It is implemented as a custom JSSE Provider, which provides only the KeyManager impelmentation. The AliasKeyManager extends the X509ExtendedKeyMAnager and repalces the methods used to select the client key. The methods used for selecting the server key are unchanged and their calls are forwarded to the original implementation.</p>

<h3>
<a id="why-do-we-need-this" class="anchor" href="#why-do-we-need-this" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why do we need this?</h3>

<p>The default Java KeyManager implementation selects the client certificate (which is used for client authentication withing the SSL connection) always selects the key which it will use based on the matching issuer certification authorities. The list of supported CAs is always provided by the SSL server when the SSL connection is being established. This works ok in most cases. But there are some cases when this doesn't work that well:
1) When self-signed certificates are used for authentication, they are usually not part of the CA list provided by the server (which is correct, because they are not CAs). As a result, the original KeyManager is unable to select the key to be used for autheitncation.
2) When there are several keys available to the client and they are all suitable for authentication, the original KeyManager select one. But every key might have a different value (e.g. every key authenticates as different identity), it might be needed to select a specific key based on its alias.</p>

<h3>
<a id="how-is-the-key-selected" class="anchor" href="#how-is-the-key-selected" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How is the key selected</h3>

<p>AliasKeyManager can select the key in two different ways:
1) When the system property <code>cz.scholz.aliaskeymanager.alias</code> is specified, this will be the alias of the key which will used
2) When the system property is not specified, the alias of the first key will be used.</p>

<p>This basically means, that when you have a keystore with multiple keys, you can use the system property to select the right key. When you have a keystore with only one key, you don't have to do anything, the AliasKeyManager will automatically use the key.</p>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<p>There is not complicated installation process. Simply include the AliasKeyManager JAR file to the classpath.</p>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h3>

<p>The AliasProvider class offers several static support methods which simplify the usage of the AliasKeyManager.</p>

<h4>
<a id="enable--didable" class="anchor" href="#enable--didable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>enable() / didable()</h4>

<p>The <code>enable()</code> and <code>disable()</code> methods can be used to enable or disable the AliasKeyManager. The <code>enable()</code> method will add it to the list of JSSE providers. The <code>disable()</code> method will remove it from the list. When the AliasKeyManager is enabled, you can use it by requesting the KeyManagerFactory for algorithm <code>aliaskm</code>:</p>

<pre><code>KeyManagerFactory kmf = KeyManagerFactory.getInstance("aliaskm");
</code></pre>

<p><strong>In case you have a control over the KeyManagerFactory algorithm, this is the best way how to use the AliasKeyManager. It will be used only on the places where you request the <code>aliaskm</code> algorithm. But all other places where SSL is used will continue to use Java's default implementation.</strong></p>

<h4>
<a id="setasdefault--unsetasdefault" class="anchor" href="#setasdefault--unsetasdefault" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>setAsDefault() / unSetAsDefault()</h4>

<p>Method <code>setAsDefault()</code> will make the AliasKeyManager the default KeyManager for your application.</p>

<pre><code>KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
</code></pre>

<p><strong>This allows you to use the AliasKeyManager even in clients / libraries which don't allow you to use your own algorithm. However, as a consequence, every SSL client / server which is using the default algorithm will now use the AliasKeyManager.</strong></p>

<p>Method <code>unSetAsDefault()</code> can be used to reset the default algorithm and return to the default Java implementation.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/scholzj/AliasKeyManager">Alias Key Manager</a> is maintained by <a href="https://github.com/scholzj">scholzj</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
